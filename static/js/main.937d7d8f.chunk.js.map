{"version":3,"sources":["../node_modules/iota.lib.js/lib/utils sync","LedgerTrampoline.jsx","App.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","LedgerTrampoline","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","registerEventListener","bind","initLedger","sendMessageToExtension","console","log","window","addEventListener","data","target","action","replyAction","params","success","payload","TransportU2F","create","transport","iota","Iota","_context","t0","message","msg","parent","postMessage","React","Component","App","react_default","a","createElement","Fragment","react_router","exact","path","render","src_LedgerTrampoline","history","createBrowserHistory","ReactDOM","src_App","document","getElementById"],"mappings":"iHAAA,SAAAA,EAAAC,GACA,IAAAC,EAAA,IAAAC,MAAA,uBAAAF,EAAA,KAEA,MADAC,EAAAE,KAAA,mBACAF,EAEAF,EAAAK,KAAA,WAAuC,UACvCL,EAAAM,QAAAN,EACAO,EAAAC,QAAAR,EACAA,EAAAS,GAAA,yMC6DeC,cA/Db,SAAAA,IAAc,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACZC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QACKI,sBAAwBP,EAAKO,sBAAsBC,OACxDR,EAAKS,WAAaT,EAAKS,WAAWD,OAClCR,EAAKU,uBAAyBV,EAAKU,uBAAuBF,OAC1DR,EAAKO,wBALOP,uFASZ,IAAMA,EAAQG,KACdQ,QAAQC,IAAI,YACZC,OAAOC,iBAAiB,UAAW,SAAUvB,GAC3C,GAAIA,GAAKA,EAAEwB,MAA0B,kBAAlBxB,EAAEwB,KAAKC,OAA4B,CACpDL,QAAQC,IAAIrB,GACZ,IAAM0B,EAAS1B,EAAEwB,KAAKE,OAGhBC,GAFS3B,EAAEwB,KAAKI,OAEFF,EAAS,UAC7B,OAAQA,GACN,IAAK,cACHjB,EAAMS,WAAWS,GACjB,MAIF,QACElB,EAAMU,uBAAuB,CAC3BO,OAAQC,EACRE,SAAS,EACTC,QAAS,WAIhB,8EAGYH,kGAEWI,IAAaC,gBAA/BC,SACNrB,KAAKsB,KAAO,IAAIC,IAAKF,GACrBrB,KAAKO,uBAAuB,CAC1BO,OAAQC,EACRE,SAAS,EACTC,QAAS,uDAGXlB,KAAKO,uBAAuB,CAC1BO,OAAQC,EACRE,SAAS,EACTC,QAASM,EAAAC,GAAEC,qKAKMC,GACrBjB,OAAOkB,OAAOC,YAAYF,EAAK,sCAI/B,OAAO,YA7DoBG,IAAMC,WCctBC,EAdH,WACV,OACEC,EAAAC,EAAAC,cAACF,EAAAC,EAAME,SAAP,KACEH,EAAAC,EAAAC,cAACE,EAAA,EAAD,KACEJ,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,OAAQ,WAC5B,OACEP,EAAAC,EAAAC,cAACM,EAAD,YCJNC,EAAUC,cAEhBC,IAASJ,OACPP,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAQK,QAASA,GACfT,EAAAC,EAAAC,cAACU,EAAD,OAEFC,SAASC,eAAe","file":"static/js/main.937d7d8f.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 200;","import React from 'react'\nimport TransportU2F from \"@ledgerhq/hw-transport-u2f\"\nimport Iota from 'hw-app-iota'\n\nclass LedgerTrampoline extends React.Component {\n\n  constructor() {\n    super()\n    this.registerEventListener = this.registerEventListener.bind()\n    this.initLedger = this.initLedger.bind()\n    this.sendMessageToExtension = this.sendMessageToExtension.bind()\n    this.registerEventListener()\n  }\n\n  registerEventListener() {\n    const _this = this\n    console.log(\"register\")\n    window.addEventListener('message', function (e) {\n      if (e && e.data && e.data.target === 'ledger-iframe') {\n        console.log(e)\n        const action = e.data.action\n        const params = e.data.params\n\n        const replyAction = action + '-reply'\n        switch (action) {\n          case 'ledger-init': \n            _this.initLedger(replyAction)\n            break\n          /*case 'ledger-unlock':\n            _this.unlock(replyAction, params.hdPath)\n            break*/\n          default:\n            _this.sendMessageToExtension({\n              action: replyAction,\n              success: false,\n              payload: null\n            })\n        }\n      }\n    }, false)\n  }\n\n  async initLedger(replyAction){\n    try {\n      const transport = await TransportU2F.create()\n      this.iota = new Iota(transport)\n      this.sendMessageToExtension({\n        action: replyAction,\n        success: true,\n        payload: null\n      })\n    } catch (e) {\n      this.sendMessageToExtension({\n        action: replyAction,\n        success: false,\n        payload: e.message\n      })\n    }\n  }\n\n  sendMessageToExtension(msg) {\n    window.parent.postMessage(msg, '*')\n  }\n\n  render() {\n    return null\n  }\n}\n\nexport default LedgerTrampoline","import React from 'react'\nimport LedgerTrampoline from './LedgerTrampoline'\nimport { Route, Switch } from 'react-router-dom'\n\nconst App = () => {\n  return (\n    <React.Fragment>\n      <Switch>\n        <Route exact path=\"/\" render={() => {\n          return (\n            <LedgerTrampoline/>\n          )\n        }}/>\n      </Switch>\n    </React.Fragment>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Router } from 'react-router-dom'\nimport { createBrowserHistory } from 'history'\nimport App from './App'\n\nconst history = createBrowserHistory()\n\nReactDOM.render(\n  <Router history={history}>\n    <App/>\n  </Router>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}